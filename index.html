<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>My Personal Assistant</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link rel="stylesheet" href="dist/css/main.css">
</head>
<body>
<div class="container">
    <div class="input">
        <div class="input__icon">
            <span class="fa fa-terminal">>_</span>
        </div>
        <input id="input" autofocus type="text" placeholder="Type your commands here..." onkeyup="input(this, event)">
    </div>
    <div class="output" id="output"></div>
</div>
<script>
    var robot = require('./dist/js/robot');
    require('./src/js/modules/menu-items/menu')(robot);
    var fs = require('fs');
    var path = require('path');

    var cards = process.cwd() + '/src/js/modules/cards';
    var plugins = process.cwd() + '/src/js/modules/plugins';

    function dynamicLoad(dir, type) {
        fs.readdirSync(dir).map(function(file) {
            var fullPath = path.join(dir, file);
            robot[type].add(require(fullPath));
        });
    }

    dynamicLoad(cards, 'cards');
    dynamicLoad(plugins, 'plugins');

    function input(el, input) {
        robot.hear(el.value, input.keyCode);
    }
</script>

</body>
</html>
